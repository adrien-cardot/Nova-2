{% style %}
	.text-with-images-section__content {
		--text-with-images-content-height: 1.6em;
	}

	.text-with-images-section__item {
		display: inline;
		vertical-align: middle;
		line-height: var(--text-with-images-content-height);
	}

	.text-with-images-section__placeholder,
	.text-with-images-section__img,
	.text-with-images-section__img > img {
		vertical-align: middle;
		display: inline-block;
		height: var(--text-with-images-content-height);
		width: auto;
	}

	.text-with-images-section__image-link {
		text-decoration: none;
		color: currentColor;
	}
	.text-with-images-section__image-link:hover {
		text-decoration: none;
	}

	.text-with-images-section__link {
		color: var(--color-scheme-link);
		cursor: pointer;
		text-decoration: underline;
		text-decoration-thickness: 1px;
		text-underline-offset: 0.2em;
		text-decoration-color: var(--color-scheme-link-a-06);
	}
	.text-with-images-section__link:hover {
		text-decoration-color: var(--color-scheme-link);
	}

	.text-with-images-section__link + .text-with-images-section__link {
		margin-left: 1rem;
	}
{% endstyle %}
<div class="section-wrapper section-wrapper--y-offset--padding color-scheme-{{ section.settings.color_scheme.id }}">
	{% if section.settings.bg_image != blank %}
		<div class="section-wrapper__bg {% if section.settings.blur_image %}section-wrapper__bg--blur{% endif %}">
			<div
				class="section-wrapper__bg-overlay"
				style="--section-wrapper-bg-overlay: {{ section.settings.image_overlay }};"
			></div>

			<picture
				class="section-wrapper__bg-img"
				style="object-position: {{ section.settings.bg_image.presentation.focal_point }};"
			>
				<source
					srcset="
						{% if section.settings.bg_image.width >= 375 %}{{ section.settings.bg_image | image_url: width: 375 }} 375w,{% endif %}
						{% if section.settings.bg_image.width >= 550 %}{{ section.settings.bg_image | image_url: width: 550 }} 550w,{% endif %}
						{% if section.settings.bg_image.width >= 750 %}{{ section.settings.bg_image | image_url: width: 750 }} 750w,{% endif %}
						{% if section.settings.bg_image.width >= 1100 %}{{ section.settings.bg_image | image_url: width: 1100 }} 1100w,{% endif %}
						{% if section.settings.bg_image.width >= 1500 %}{{ section.settings.bg_image | image_url: width: 1500 }} 1500w,{% endif %}
						{% if section.settings.bg_image.width >= 1780 %}{{ section.settings.bg_image | image_url: width: 1780 }} 1780w,{% endif %}
						{% if section.settings.bg_image.width >= 2000 %}{{ section.settings.bg_image | image_url: width: 2000 }} 2000w,{% endif %}
						{% if section.settings.bg_image.width >= 3000 %}{{ section.settings.bg_image | image_url: width: 3000 }} 3000w,{% endif %}
						{% if section.settings.bg_image.width >= 3840 %}{{ section.settings.bg_image | image_url: width: 3840 }} 3840w,{% endif %}
						{{ section.settings.bg_image | image_url }} {{ section.settings.bg_image.width }}w
					"
					sizes="100vw"
				>

				<img
					src="{{ section.settings.bg_image | image_url }}"
					alt="{{ section.settings.bg_image.alt | escape }}"
					width="{{ section.settings.bg_image.width }}"
					height="{{ section.settings.bg_image.height }}"
					loading="lazy"
					data-img-loading
					onload="this.removeAttribute(&#34;data-img-loading&#34;)"
				>
			</picture>
		</div>
	{% endif %}

	<div class="container section-wrapper__body">
		{% if section.blocks.size > 0 %}
			<div class="content content--align--{{ section.settings.text_align }}">
				<div class="heading heading--size--{{ section.settings.size }} text-with-images-section__content">
					{% for block in section.blocks -%}
						{%- case block.type -%}
							{%- when 'text' -%}
								{%- if block.settings.text_content != blank -%}
									{%- if block.settings.link != blank -%}
										<a
											class="text-with-images-section__link text-with-images-section__item"
											href="{{ block.settings.link }}"
											aria-label="{{ block.settings.text_content }}"
										>
											{{- block.settings.text_content -}}
										</a>
									{%- else %}
										<div class="text-with-images-section__item">{{ block.settings.text_content }}</div>
									{% endif -%}
								{%- endif -%}
							{%- when 'image' -%}
								{%- if block.settings.link != blank -%}
									<a
										class="text-with-images-section__image-link text-with-images-section__item"
										href="{{ block.settings.link }}"
										aria-label="{{ block.settings.image.alt }}"
									>
										{% if block.settings.image == blank %}
											{{
												0
												| modulo: 6
												| plus: 1
												| prepend: '-'
												| prepend: 'collection'
												| placeholder_svg_tag: 'text-with-images-section__placeholder'
											-}}
										{%- else %}
											<picture class="text-with-images-section__img">
												<source srcset="{{ block.settings.image | image_url: width: 150 }} 1x, {{ block.settings.image | image_url: width: 300 }} 2x, {{ block.settings.image | image_url: width: 450 }} 3x">

												<img
													src="{{ block.settings.image | image_url }}"
													alt="{{ block.settings.image.alt | escape }}"
													width="{{ block.settings.image.width }}"
													height="{{ block.settings.image.height }}"
													loading="lazy"
													data-img-loading
													onload="this.removeAttribute(&#34;data-img-loading&#34;)"
												>
											</picture>
										{%- endif %}
									</a>
								{%- else %}
									<div class="text-with-images-section__item">
										{% if block.settings.image == blank %}
											{{
												0
												| modulo: 6
												| plus: 1
												| prepend: '-'
												| prepend: 'collection'
												| placeholder_svg_tag: 'text-with-images-section__placeholder'
											-}}
										{%- else %}
											<picture class="text-with-images-section__img">
												<source srcset="{{ block.settings.image | image_url: width: 150 }} 1x, {{ block.settings.image | image_url: width: 300 }} 2x, {{ block.settings.image | image_url: width: 450 }} 3x">

												<img
													src="{{ block.settings.image | image_url }}"
													alt="{{ block.settings.image.alt | escape }}"
													width="{{ block.settings.image.width }}"
													height="{{ block.settings.image.height }}"
													loading="lazy"
													data-img-loading
													onload="this.removeAttribute(&#34;data-img-loading&#34;)"
												>
											</picture>
										{%- endif %}
									</div>
								{% endif -%}
						{%- endcase -%}
					{%- endfor %}
				</div>
			</div>
		{% endif %}
	</div>
</div>

{% schema %}
	{
		"name": "Text with images",
		"class": "text-with-images-section",
		"presets": [
			{
				"name": "Text with images",
				"blocks": [
					{
						"type": "image"
					},
					{
						"type": "text",
						"settings": {
							"text_content": "Highlights"
						}
					},
					{
						"type": "image"
					},
					{
						"type": "text",
						"settings": {
							"text_content": "Features"
						}
					},
					{
						"type": "image"
					}
				],
				"category": "Promotional"
			}
		],
		"disabled_on": {
			"templates": ["password"],
			"groups": ["header", "custom.overlay"]
		},
		"settings": [
			{
				"type": "color_scheme",
				"id": "color_scheme",
				"label": "Color scheme"
			},
			{
				"type": "text_alignment",
				"id": "text_align",
				"label": "Text alignment",
				"default": "center"
			},
			{
				"type": "select",
				"id": "size",
				"label": "Text size",
				"options": [
					{
						"value": "h2",
						"label": "Small"
					},
					{
						"value": "h1",
						"label": "Medium"
					},
					{
						"value": "d3",
						"label": "Large"
					}
				],
				"default": "h2"
			},
			{
				"type": "header",
				"content": "Background image",
				"info": "Optional"
			},
			{
				"type": "image_picker",
				"id": "bg_image",
				"label": "Image"
			},
			{
				"type": "range",
				"id": "image_overlay",
				"label": "Overlay",
				"min": 0,
				"max": 100,
				"step": 1,
				"default": 30,
				"unit": "%"
			},
			{
				"type": "checkbox",
				"id": "blur_image",
				"label": "Blur image",
				"default": false
			}
		],
		"blocks": [
			{
				"name": "Text",
				"type": "text",
				"settings": [
					{
						"type": "text",
						"id": "text_content",
						"label": "Text",
						"default": "Text"
					},
					{
						"type": "url",
						"id": "link",
						"label": "Link"
					}
				]
			},
			{
				"name": "Image",
				"type": "image",
				"settings": [
					{
						"type": "image_picker",
						"id": "image",
						"label": "Image"
					},
					{
						"type": "url",
						"id": "link",
						"label": "Link"
					}
				]
			}
		]
	}
{% endschema %}
