{% style %}
	.featured-blog-asymmetric {
		background-color: #f5f5f5;
		padding: 4rem 0;
	}
	
	.featured-blog-asymmetric__header {
		display: flex;
		align-items: flex-start;
		gap: 1.5rem;
		margin-bottom: 3rem;
		padding: 0 2rem;
	}
	
	.featured-blog-asymmetric__header-line {
		width: 4px;
		height: 60px;
		background-color: #4A90E2;
		flex-shrink: 0;
	}
	
	.featured-blog-asymmetric__header-text {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
	}
	
	.featured-blog-asymmetric__header-title {
		font-size: 2.5rem;
		font-weight: 700;
		line-height: 1.2;
		text-transform: uppercase;
		color: #000;
		margin: 0;
		letter-spacing: -0.02em;
	}
	
	.featured-blog-asymmetric__header-subtitle {
		font-size: 1.125rem;
		font-weight: 400;
		text-transform: uppercase;
		color: #000;
		margin: 0;
		letter-spacing: 0.05em;
	}
	
	.featured-blog-asymmetric__grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 2rem;
		padding: 0 2rem;
		max-width: 1400px;
		margin: 0 auto;
	}
	
	.featured-blog-asymmetric__main-article {
		grid-column: 1;
	}
	
	.featured-blog-asymmetric__sidebar {
		grid-column: 2;
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
	}
	
	.featured-blog-asymmetric__article-card {
		background: #fff;
		border-radius: 8px;
		overflow: hidden;
		transition: transform 0.3s ease, box-shadow 0.3s ease;
		text-decoration: none;
		color: inherit;
		display: block;
	}
	
	.featured-blog-asymmetric__article-card:hover {
		transform: translateY(-4px);
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
	}
	
	.featured-blog-asymmetric__article-image {
		width: 100%;
		height: auto;
		display: block;
		object-fit: cover;
	}
	
	.featured-blog-asymmetric__main-article .featured-blog-asymmetric__article-image {
		aspect-ratio: 4/3;
	}
	
	.featured-blog-asymmetric__sidebar .featured-blog-asymmetric__article-image {
		aspect-ratio: 16/10;
	}
	
	.featured-blog-asymmetric__article-content {
		padding: 1.5rem;
	}
	
	.featured-blog-asymmetric__main-article .featured-blog-asymmetric__article-content {
		padding: 2rem;
	}
	
	.featured-blog-asymmetric__article-title {
		font-size: 1.5rem;
		font-weight: 700;
		line-height: 1.3;
		color: #000;
		margin: 0 0 1rem 0;
	}
	
	.featured-blog-asymmetric__main-article .featured-blog-asymmetric__article-title {
		font-size: 2rem;
		margin-bottom: 1.25rem;
	}
	
	.featured-blog-asymmetric__sidebar .featured-blog-asymmetric__article-title {
		font-size: 1.125rem;
		margin-bottom: 0.75rem;
	}
	
	.featured-blog-asymmetric__article-meta {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		margin-bottom: 1.25rem;
		font-size: 0.875rem;
		color: #666;
	}
	
	.featured-blog-asymmetric__reading-time {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		text-transform: uppercase;
		font-weight: 500;
		letter-spacing: 0.05em;
	}
	
	.featured-blog-asymmetric__reading-time-icon {
		width: 16px;
		height: 16px;
		fill: currentColor;
	}
	
	.featured-blog-asymmetric__article-button {
		display: inline-block;
		background-color: #1a3a5f;
		color: #fff;
		padding: 0.75rem 1.5rem;
		border-radius: 4px;
		text-decoration: none;
		font-weight: 600;
		font-size: 0.875rem;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		transition: background-color 0.3s ease;
		border: none;
		cursor: pointer;
	}
	
	.featured-blog-asymmetric__article-button:hover {
		background-color: #0f2a47;
	}
	
	@media (max-width: 991px) {
		.featured-blog-asymmetric__grid {
			grid-template-columns: 1fr;
			gap: 1.5rem;
		}
		
		.featured-blog-asymmetric__main-article {
			grid-column: 1;
		}
		
		.featured-blog-asymmetric__sidebar {
			grid-column: 1;
		}
		
		.featured-blog-asymmetric__header-title {
			font-size: 2rem;
		}
		
		.featured-blog-asymmetric__header {
			padding: 0 1rem;
		}
		
		.featured-blog-asymmetric__grid {
			padding: 0 1rem;
		}
	}
{% endstyle %}

{%- liquid
	assign blog_handle = section.settings.blog
	assign max_articles = section.settings.max_articles | default: 4
	
	if blog_handle != blank
		assign selected_blog = blogs[blog_handle]
		if selected_blog
			assign articles = selected_blog.articles | limit: max_articles
		else
			assign articles = blank
		endif
	else
		assign articles = blank
	endif
	
	assign main_article = articles.first
	assign sidebar_articles = articles | offset: 1 | limit: 3
-%}

{%- comment -%} Calculate reading time {%- endcomment -%}
{%- liquid
	assign words_per_minute = 200
-%}

<div class="featured-blog-asymmetric section-wrapper section-wrapper--y-offset--padding">
	<div class="container">
		<div class="featured-blog-asymmetric__header">
			<div class="featured-blog-asymmetric__header-line"></div>
			<div class="featured-blog-asymmetric__header-text">
				<h2 class="featured-blog-asymmetric__header-title">{{ section.settings.section_heading | default: "NOS ACTUALITÉS" }}</h2>
				{% if section.settings.section_subheading != blank %}
					<p class="featured-blog-asymmetric__header-subtitle">{{ section.settings.section_subheading }}</p>
				{% endif %}
			</div>
		</div>
		
		<div class="featured-blog-asymmetric__grid">
			{%- if main_article -%}
				<article class="featured-blog-asymmetric__main-article">
					<a href="{{ main_article.url }}" class="featured-blog-asymmetric__article-card">
						{% if main_article.image %}
							<img
								src="{{ main_article.image | image_url: width: 800 }}"
								srcset="{{ main_article.image | image_url: width: 400 }} 400w,
								        {{ main_article.image | image_url: width: 800 }} 800w,
								        {{ main_article.image | image_url: width: 1200 }} 1200w"
								sizes="(max-width: 991px) 100vw, 50vw"
								alt="{{ main_article.image.alt | escape }}"
								class="featured-blog-asymmetric__article-image"
								loading="lazy"
							>
						{% endif %}
						<div class="featured-blog-asymmetric__article-content">
							<h3 class="featured-blog-asymmetric__article-title">{{ main_article.title | escape }}</h3>
							<div class="featured-blog-asymmetric__article-meta">
								<div class="featured-blog-asymmetric__reading-time">
									<svg class="featured-blog-asymmetric__reading-time-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<circle cx="12" cy="12" r="10"></circle>
										<polyline points="12 6 12 12 16 14"></polyline>
									</svg>
									{%- assign word_count = main_article.content | strip_html | number_of_words -%}
									{%- assign reading_time = word_count | divided_by: words_per_minute | plus: 1 -%}
									<span>{{ reading_time }} MIN DE LECTURE</span>
								</div>
							</div>
							<button class="featured-blog-asymmetric__article-button">{{ section.settings.button_label | default: "En savoir plus" }}</button>
						</div>
					</a>
				</article>
			{%- endif -%}
			
			<div class="featured-blog-asymmetric__sidebar">
				{%- for article in sidebar_articles -%}
					<article>
						<a href="{{ article.url }}" class="featured-blog-asymmetric__article-card">
							{% if article.image %}
								<img
									src="{{ article.image | image_url: width: 600 }}"
									srcset="{{ article.image | image_url: width: 300 }} 300w,
									        {{ article.image | image_url: width: 600 }} 600w,
									        {{ article.image | image_url: width: 900 }} 900w"
									sizes="(max-width: 991px) 100vw, 50vw"
									alt="{{ article.image.alt | escape }}"
									class="featured-blog-asymmetric__article-image"
									loading="lazy"
								>
							{% endif %}
							<div class="featured-blog-asymmetric__article-content">
								<h3 class="featured-blog-asymmetric__article-title">{{ article.title | escape }}</h3>
								<div class="featured-blog-asymmetric__article-meta">
									<div class="featured-blog-asymmetric__reading-time">
										<svg class="featured-blog-asymmetric__reading-time-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<circle cx="12" cy="12" r="10"></circle>
											<polyline points="12 6 12 12 16 14"></polyline>
										</svg>
										{%- assign word_count = article.content | strip_html | number_of_words -%}
										{%- assign reading_time = word_count | divided_by: words_per_minute | plus: 1 -%}
										<span>{{ reading_time }} MIN DE LECTURE</span>
									</div>
								</div>
								<button class="featured-blog-asymmetric__article-button">{{ section.settings.button_label | default: "En savoir plus" }}</button>
							</div>
						</a>
					</article>
				{%- endfor -%}
			</div>
		</div>
	</div>
</div>

{% schema %}
	{
		"name": "Featured blog asymmetric",
		"class": "featured-blog-asymmetric-section",
		"presets": [
			{
				"name": "Featured blog asymmetric",
				"category": "Store information"
			}
		],
		"disabled_on": {
			"templates": ["password"],
			"groups": ["header", "footer", "custom.overlay"]
		},
		"settings": [
			{
				"type": "blog",
				"id": "blog",
				"label": "Blog"
			},
			{
				"type": "range",
				"id": "max_articles",
				"label": "Maximum articles to show",
				"min": 1,
				"max": 10,
				"step": 1,
				"default": 4,
				"info": "First article will be large, next 3 will be smaller"
			},
			{
				"type": "text",
				"id": "section_heading",
				"label": "Heading",
				"default": "NOS ACTUALITÉS"
			},
			{
				"type": "text",
				"id": "section_subheading",
				"label": "Subheading",
				"default": "À LA UNE"
			},
			{
				"type": "text",
				"id": "button_label",
				"label": "Button label",
				"default": "En savoir plus"
			}
		]
	}
{% endschema %}

