{% style %}
	.announcement-bar-section__inner {
		position: relative;
		text-align: center;
		padding: 0.5rem 1rem;
	}
{% endstyle %}
{%- if section.blocks.size > 0 %}
	<div class="color-scheme-{{ section.settings.color_scheme.id }} color-scheme--use-color color-scheme--use-gradient">
		{% capture capture_blocks -%}
			{%- for block in section.blocks -%}
				{%- if block.settings.text != blank %}
					<div {{ block.shopify_attributes }}>
						<div class="announcement-bar-section__inner">
							<p class="text text--size--{{ section.settings.text_size }} text--bold {% if section.settings.uppercase %}text--upcase{% endif %}">
								{{ block.settings.text }}
							</p>
							{% if block.settings.link != blank -%}
								<a class="stretched-link" href="{{ block.settings.link }}" aria-label="{{ block.settings.text }}"> </a>
							{%- endif %}
						</div>
					</div>
				{% endif -%}
			{%- endfor -%}
		{%- endcapture %}

		{% if section.blocks.size == 1 -%}
			{{- capture_blocks -}}
		{%- else -%}
			<x-moving-line
				class="moving-line moving-line--animation--auto moving-line--spacing--none"
				style="--moving-line-direction: normal;--moving-line-animation-speed-mult: 1;"
			>
				<div class="moving-line__content" data-moving-line-element="content">
					{{ capture_blocks }}
				</div>
			</x-moving-line>
			<script type="module" src="{{ 'component-moving-line.js' | asset_url }}"></script>
		{% endif %}
	</div>
{% endif %}

{% schema %}
	{
		"name": "Announcement bar",
		"class": "announcement-bar-section",
		"presets": [
			{
				"name": "Announcement bar",
				"blocks": [
					{
						"type": "announcement"
					}
				],
				"category": "Promotional"
			}
		],
		"limit": 1,
		"enabled_on": {
			"groups": ["header"]
		},
		"settings": [
			{
				"type": "color_scheme",
				"id": "color_scheme",
				"label": "Color scheme",
				"default": "red"
			},
			{
				"type": "select",
				"id": "text_size",
				"label": "Text size",
				"options": [
					{
						"value": "sm",
						"label": "Small"
					},
					{
						"value": "md",
						"label": "Medium"
					},
					{
						"value": "lg",
						"label": "Large"
					}
				],
				"default": "md"
			},
			{
				"type": "checkbox",
				"id": "uppercase",
				"label": "Capitalize"
			}
		],
		"blocks": [
			{
				"name": "Text",
				"type": "announcement",
				"settings": [
					{
						"type": "text",
						"id": "text",
						"label": "Text",
						"default": "Free shipping over $100"
					},
					{
						"type": "url",
						"id": "link",
						"label": "Link"
					}
				]
			}
		]
	}
{% endschema %}
